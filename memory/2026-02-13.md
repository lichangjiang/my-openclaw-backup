# 2026-02-13 - K8s 服务信息记录

## 本地 K8s 环境

**集群信息：**
- 类型：microk8s
- 版本：v1.28.15
- 安装方式：snap
- 集群地址：https://10.0.0.23:16443
- context 名称：microk8s
- 用户：lichangjiang

**访问权限配置：**
- 用户已添加到 microk8s 组
- Kubectl 别名：`alias kubectl='microk8s.kubectl'` (在 ~/.bashrc 中)
- 完整 kubectl 路径：`/usr/local/bin/kubectl` (符号链接到 `/snap/bin/microk8s.kubectl`)
- sudo 配置：配置了无密码执行 kubectl (`/etc/sudoers.d/microk8s-kubectl`)
- **在 OpenClaw 执行环境中需要使用 `sudo /snap/bin/microk8s.kubectl`**

**Namespaces：**
- default
- kube-node-lease
- kube-public
- kube-system
- kuboard (Kuboard 管理界面)
- srs (SRS 服务)

## SRS 服务部署

**部署信息：**
- Namespace: `srs`
- Deployment 名称: `srs-web-deployment`
- 镜像: `lichangj/srs-word:v1.0.10` (今天从 v1.0.9 升级)
- 副本数: 3
- 容器端口: 5000
- 外部访问端口: 30080
- 服务地址: http://10.0.0.23:30080

**Pod 列表：**
- srs-web-deployment-6c7c48d97f-2qr5c
- srs-web-deployment-6c7c48d97f-sd4ph
- srs-web-deployment-6c7c48d97f-tlgxm

**资源配置：**
- Limits: cpu 500m, memory 1Gi
- Requests: cpu 250m, memory 256Mi

**环境变量：**
- DB_NAME, DB_USER, DB_PASSWORD (从 secret srs-secret)
- DB_HOST, DB_PORT, DB_CONNECT_TIMEOUT (从 config map srs-config)
- 健康检查：/healthz

## SRS API 接口

**基础地址：** http://10.0.0.23:30080

**已测试接口：**
- GET /api/knowledge_items - 分页查询知识项

**接口功能：**
- 支持分页查询（page, limit 参数）
- 支持按类型过滤（item_type: word/sentence）
- 支持关键词搜索（search 参数）
- 返回格式：{page, limit, total, items[]}

**数据统计：**
- 总记录数：715 条
- 单词数量：528 条
- 句子数量：187 条

## 其他服务

**Kuboard 管理界面：**
- Namespace: `kuboard`
- Deployment: kuboard-v3, kuboard-agent, kuboard-agent-2
- 可用于 K8s 集群可视化管理

## Gmail 配置（待继续）

用户正在创建 GCP 项目，完成后继续配置 Gmail 相关功能。
