# 2026-02-21

## OpenClaw Configuration - maxConcurrent Settings

Discovered through source code analysis in `/home/lichangjiang/.nvm/versions/node/v22.21.1/lib/node_modules/openclaw`:

### Three maxConcurrent Configurations

**1. Agent Maximum Concurrent Sessions**
- Path: `agents.defaults.maxConcurrent`
- Type: integer, positive
- Default value: **4**
- Purpose: Controls maximum concurrent main agent sessions

**2. Subagent Maximum Concurrent Sessions**
- Path: `agents.defaults.subagents.maxConcurrent`
- Type: integer, positive
- Default value: **8**
- Purpose: Controls maximum concurrent subagent sessions (created via sessions_spawn)

**3. Cron Jobs Maximum Concurrent Runs**
- Path: `cron.maxConcurrentRuns`
- Type: integer, positive
- Default value: **1**
- Purpose: Controls maximum number of cron jobs running simultaneously

### Implementation Details

These configurations are applied via `setCommandLaneConcurrency()` function to different execution channels:
- `CommandLane.Cron` - cron jobs
- `CommandLane.Main` - main agent sessions
- `CommandLane.Subagent` - subagent sessions

### Configuration Example

```json
{
  "agents": {
    "defaults": {
      "maxConcurrent": 4,
      "subagents": {
        "maxConcurrent": 8
      }
    }
  },
  "cron": {
    "enabled": true,
    "maxConcurrentRuns": 1
  }
}
```

### Source Files

- Default values defined in: `dist/config-*.js` (DEFAULT_AGENT_MAX_CONCURRENT, DEFAULT_SUBAGENT_MAX_CONCURRENT)
- Schema validation in: `dist/config-*.js` (z.number().int().positive().optional())
- Lane application in: `dist/gateway-cli-*.js` (applyGatewayLaneConcurrency function)
